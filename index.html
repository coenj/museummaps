<!DOCTYPE html>
<html>

<head>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>



  <script>
  
    getPageViews("Kunsthal");

    function shortDate(passedDate) {
      passedDate = passedDate.slice(0, 10).replace(/-/g, "")
      return passedDate
    }

    function getPageViews(searchpage) {

      window.onload = function () {
        var date = new Date(Date.now())
        var endDate = shortDate(date.toISOString())

        // change date to 1 month before on 1st day
        console.log(date)
        date.setMonth(date.getMonth() - 1);
        date.setDate(1);
        var startDate = shortDate(date.toISOString())

        console.log(startDate)
        var url = "https://wikimedia.org/api/rest_v1/metrics/pageviews/per-article/en.wikipedia.org/all-access/all-agents/" + searchpage + "/monthly/" + startDate + "/" + endDate

        $.ajax({
          url: url,
          dataType: 'json',
          success: function (data) {
            response = data;
          }
        }).done(function (response) {
          console.log(response);
          console.log(response.items[0].views); // <<< number of views of this page!

          document.getElementsByTagName("h2")[0].innerHTML = response.items[0].views


        })
      }
    }
  </script>
</head>

<body>
  <div class="container-fluid">
    <div class="row text-center">
      <h2>Cat Photo Finder</h2>
    </div>
    <div class="row text-center">
      <div class="col-xs-12 well message">
        The message will go here
      </div>
    </div>
    <div class="row text-center">
      <div class="col-xs-12">
        <button id="getMessage" class="btn btn-primary">
        Get Message
      </button>
      </div>
    </div>
  </div>
</body>

</html>